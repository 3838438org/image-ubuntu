#!/bin/bash

set -e
set -x

ARCH=armhf
VARIANT=minbase
COMPONENTS=main,universe
PKGS_INCLUDE=ca-certificates,cron,curl,iptables,iputils-ping,isc-dhcp-client,less,man-db,nano,nbd-client,net-tools,ntp,ntpdate,rsyslog,ssh,sudo,wget,whiptail,xnbd-client
MIRROR=http://mirror.cloud.online.net/ubuntu-ports/
VERSION=trusty
DEBOOTSTRAP_DIR=/tmp/ubuntu
SCRIPT=""

run_debootstrap() {
    sudo debootstrap \
	--arch="$ARCH" \
	--variant="$VARIANT" \
	--components="$COMPONENTS" \
	--include="$PKGS_INCLUDE" \
	--foreign \
	"$VERSION" \
	"$DEBOOTSTRAP_DIR" \
	"$MIRROR" \
	"$SCRIPT"
}


main() {
    rm -rf $DEBOOTSTRAP_DIR
    run_debootstrap
}
main
